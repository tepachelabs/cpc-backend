[supervisord]
nodaemon=true

[program:django-app]
command=/usr/bin/doppler run -- gunicorn -c gunicorn_config.py cpc.wsgi
directory=/app
autostart=true
autorestart=true
pre-start=/usr/bin/doppler run -- poetry run python manage.py migrate

[program:celery]
command=/usr/bin/doppler run -- poetry run celery -A cpc worker --loglevel=info
directory=/app
autostart=true
autorestart=true

[program:celery-beat-scheduler]
command=/usr/bin/doppler run -- poetry run celery -A cpc beat --loglevel=info
directory=/app
autostart=true
autorestart=true
